const merge = require('webpack-merge');const webpack = require('webpack');const baseConfig = require('./webpack.base.config');const config = require('./config');const mode = config.production;const nodeExternals = require('webpack-node-externals');const { resolve } = require('./utils');module.exports = merge(baseConfig(mode), {    target: 'node',    devtool: mode.devtool,    entry: resolve('app/server-entry.js'),    output: {        filename: 'server-bundle.js',        libraryTarget: 'commonjs2'    },    externals: nodeExternals({        // do not externalize CSS files in case we need to import it from a dep        whitelist: /\.css$/    }),    plugins: [        new webpack.DefinePlugin({            'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV || 'development'),            'process.env.VUE_ENV': '"server"'        }),    ]})